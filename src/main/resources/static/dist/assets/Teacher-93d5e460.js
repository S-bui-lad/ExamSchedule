import{a as A,g as N,r as i,s as S,ab as ce,M as de,c as W,_ as u,P as ae,u as F,i as pe,b as L,ac as he,j as e,d as w,e as U,ad as ue,z as ne,A as $,Y as ge,a2 as xe,C as X,I as E,ae as me,aa as k,af as ve,F as T,ag as fe,ah as Ce,ai as je,aj as te,ak as v,al as ke,am as ye}from"./index-16114832.js";import{M as Y}from"./MenuItem-136afda8.js";import{F as se,C as oe}from"./FormControlLabel-29a7758c.js";function be(s){return N("MuiDialog",s)}const De=A("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),J=De,Me=i.createContext({}),re=Me,Te=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Se=S(ce,{name:"MuiDialog",slot:"Backdrop",overrides:(s,t)=>t.backdrop})({zIndex:-1}),We=s=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:c,fullScreen:g}=s,l={root:["root"],container:["container",`scroll${W(n)}`],paper:["paper",`paperScroll${W(n)}`,`paperWidth${W(String(r))}`,c&&"paperFullWidth",g&&"paperFullScreen"]};return U(l,be,t)},we=S(de,{name:"MuiDialog",slot:"Root",overridesResolver:(s,t)=>t.root})({"@media print":{position:"absolute !important"}}),$e=S("div",{name:"MuiDialog",slot:"Container",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.container,t[`scroll${W(n.scroll)}`]]}})(({ownerState:s})=>u({height:"100%","@media print":{height:"auto"},outline:0},s.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},s.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Ie=S(ae,{name:"MuiDialog",slot:"Paper",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.paper,t[`scrollPaper${W(n.scroll)}`],t[`paperWidth${W(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:s,ownerState:t})=>u({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:s.breakpoints.unit==="px"?Math.max(s.breakpoints.values.xs,444):`max(${s.breakpoints.values.xs}${s.breakpoints.unit}, 444px)`,[`&.${J.paperScrollBody}`]:{[s.breakpoints.down(Math.max(s.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${s.breakpoints.values[t.maxWidth]}${s.breakpoints.unit}`,[`&.${J.paperScrollBody}`]:{[s.breakpoints.down(s.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${J.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Pe=i.forwardRef(function(t,n){const r=F({props:t,name:"MuiDialog"}),c=pe(),g={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":d,BackdropComponent:f,BackdropProps:C,children:H,className:y,disableEscapeKeyDown:B=!1,fullScreen:b=!1,fullWidth:I=!1,maxWidth:V="sm",onBackdropClick:x,onClose:m,open:p,PaperComponent:D=ae,PaperProps:M={},scroll:z="paper",TransitionComponent:O=ue,transitionDuration:R=g,TransitionProps:G}=r,K=L(r,Te),a=u({},r,{disableEscapeKeyDown:B,fullScreen:b,fullWidth:I,maxWidth:V,scroll:z}),o=We(a),h=i.useRef(),j=P=>{h.current=P.target===P.currentTarget},le=P=>{h.current&&(h.current=null,x&&x(P),m&&m(P,"backdropClick"))},_=he(d),ie=i.useMemo(()=>({titleId:_}),[_]);return e.jsx(we,u({className:w(o.root,y),closeAfterTransition:!0,components:{Backdrop:Se},componentsProps:{backdrop:u({transitionDuration:R,as:f},C)},disableEscapeKeyDown:B,onClose:m,open:p,ref:n,onClick:le,ownerState:a},K,{children:e.jsx(O,u({appear:!0,in:p,timeout:R,role:"presentation"},G,{children:e.jsx($e,{className:w(o.container),onMouseDown:j,ownerState:a,children:e.jsx(Ie,u({as:D,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":_},M,{className:w(o.paper,M.className),ownerState:a,children:e.jsx(re.Provider,{value:ie,children:H})}))})}))}))}),Q=Pe;function Be(s){return N("MuiDialogActions",s)}A("MuiDialogActions",["root","spacing"]);const Re=["className","disableSpacing"],Ee=s=>{const{classes:t,disableSpacing:n}=s;return U({root:["root",!n&&"spacing"]},Be,t)},Ae=S("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:s})=>u({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!s.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),Ne=i.forwardRef(function(t,n){const r=F({props:t,name:"MuiDialogActions"}),{className:c,disableSpacing:g=!1}=r,l=L(r,Re),d=u({},r,{disableSpacing:g}),f=Ee(d);return e.jsx(Ae,u({className:w(f.root,c),ownerState:d,ref:n},l))}),q=Ne;function Fe(s){return N("MuiDialogContent",s)}A("MuiDialogContent",["root","dividers"]);function Le(s){return N("MuiDialogTitle",s)}const Ue=A("MuiDialogTitle",["root"]),He=Ue,Ve=["className","dividers"],ze=s=>{const{classes:t,dividers:n}=s;return U({root:["root",n&&"dividers"]},Fe,t)},Oe=S("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.root,n.dividers&&t.dividers]}})(({theme:s,ownerState:t})=>u({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(s.vars||s).palette.divider}`,borderBottom:`1px solid ${(s.vars||s).palette.divider}`}:{[`.${He.root} + &`]:{paddingTop:0}})),Ge=i.forwardRef(function(t,n){const r=F({props:t,name:"MuiDialogContent"}),{className:c,dividers:g=!1}=r,l=L(r,Ve),d=u({},r,{dividers:g}),f=ze(d);return e.jsx(Oe,u({className:w(f.root,c),ownerState:d,ref:n},l))}),Z=Ge,Ke=["className","id"],_e=s=>{const{classes:t}=s;return U({root:["root"]},Le,t)},Xe=S(ne,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(s,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Ye=i.forwardRef(function(t,n){const r=F({props:t,name:"MuiDialogTitle"}),{className:c,id:g}=r,l=L(r,Ke),d=r,f=_e(d),{titleId:C=g}=i.useContext(re);return e.jsx(Xe,u({component:"h2",className:w(f.root,c),ownerState:d,ref:n,variant:"h6",id:g??C},l))}),ee=Ye;var Je=$("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),Qe=$("filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]),qe=$("mood-sad","IconMoodSad",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 10l.01 0",key:"svg-1"}],["path",{d:"M15 10l.01 0",key:"svg-2"}],["path",{d:"M9.5 15.25a3.5 3.5 0 0 1 5 0",key:"svg-3"}]]),Ze=$("mood-smile","IconMoodSmile",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 10l.01 0",key:"svg-1"}],["path",{d:"M15 10l.01 0",key:"svg-2"}],["path",{d:"M9.5 15a3.5 3.5 0 0 0 5 0",key:"svg-3"}]]),ea=$("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),aa=$("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);const na=()=>{const[s,t]=i.useState([]),[n,r]=i.useState([]),[c,g]=i.useState(""),[l,d]=i.useState({status:"",mgv:"",khoa:""}),[f,C]=i.useState(!1),[H,y]=i.useState(!1),[B,b]=i.useState(!1),[I,V]=i.useState(null),[x,m]=i.useState({name:"",status:!1,mgv:"",khoa:""}),[p,D]=i.useState({id:null,name:"",status:!1,mgv:"",khoa:""}),M="http://192.168.70.101:8080/teachers",z=async()=>{try{const o=await(await fetch(M)).json();t(o),r(o)}catch(a){console.error("Error fetching teachers:",a);const o=[{id:1,mgv:"GV001",name:"Nguyễn Văn A",khoa:"Công nghệ thông tin",status:!0},{id:2,mgv:"GV002",name:"Trần Thị B",khoa:"Kinh tế",status:!1},{id:3,mgv:"GV003",name:"Lê Văn C",khoa:"Công nghệ thông tin",status:!0}];t(o),r(o)}};i.useEffect(()=>{z()},[]),i.useEffect(()=>{let a=[...s];c&&(a=a.filter(o=>o.name.toLowerCase().includes(c.toLowerCase()))),l.status!==""&&(a=a.filter(o=>String(o.status)===l.status)),l.mgv&&(a=a.filter(o=>o.mgv.includes(l.mgv))),l.khoa&&(a=a.filter(o=>o.khoa.includes(l.khoa))),r(a)},[c,l,s]);const O=async()=>{try{const o=await(await fetch(`${M}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).json();t(h=>[...h,o]),C(!1),m({name:"",status:!1,mgv:"",khoa:""})}catch(a){console.error("Error adding teacher:",a);const o=Math.max(...s.map(j=>j.id))+1,h={...x,id:o};t(j=>[...j,h]),C(!1),m({name:"",status:!1,mgv:"",khoa:""})}},R=async()=>{try{await fetch(`${M}/delete?id=${I}`,{method:"DELETE"}),t(a=>a.filter(o=>o.id!==I)),b(!1)}catch(a){console.error("Error deleting teacher:",a),t(o=>o.filter(h=>h.id!==I)),b(!1)}},G=a=>{D(a),y(!0)},K=async()=>{try{const o=await(await fetch(M,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json();t(h=>h.map(j=>j.id===o.id?o:j)),y(!1)}catch(a){console.error("Error updating teacher:",a),t(o=>o.map(h=>h.id===p.id?p:h)),y(!1)}};return e.jsx(ge,{title:"Quản lý giảng viên",description:"Danh sách giảng viên",children:e.jsxs(xe,{title:"Danh sách giảng viên",children:[e.jsxs(X,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(X,{display:"flex",gap:2,alignItems:"center",children:[e.jsx(E,{children:e.jsx(Qe,{})}),e.jsxs(me,{value:l.status,onChange:a=>d({...l,status:a.target.value}),displayEmpty:!0,size:"small",children:[e.jsx(Y,{value:"",children:"Tất cả"}),e.jsx(Y,{value:"true",children:"Hoạt động"}),e.jsx(Y,{value:"false",children:"Ngưng"})]}),e.jsx(k,{label:"Lọc mã GV",size:"small",value:l.mgv,onChange:a=>d({...l,mgv:a.target.value})}),e.jsx(k,{label:"Lọc khoa",size:"small",value:l.khoa,onChange:a=>d({...l,khoa:a.target.value})})]}),e.jsxs(ae,{sx:{display:"flex",alignItems:"center",width:300,px:1},children:[e.jsx(ve,{placeholder:"Tìm theo tên...",fullWidth:!0,value:c,onChange:a=>g(a.target.value)}),e.jsx(E,{children:e.jsx(ea,{})})]}),e.jsx(T,{variant:"contained",color:"primary",onClick:()=>C(!0),children:"Thêm giảng viên"})]}),e.jsx(fe,{children:e.jsxs(Ce,{children:[e.jsx(je,{children:e.jsxs(te,{children:[e.jsx(v,{children:"Mã GV"}),e.jsx(v,{children:"Tên"}),e.jsx(v,{children:"Khoa"}),e.jsx(v,{children:"Trạng thái"}),e.jsx(v,{children:"Hành động"})]})}),e.jsx(ke,{children:n.map(a=>e.jsxs(te,{children:[e.jsx(v,{children:a.mgv}),e.jsx(v,{children:a.name}),e.jsx(v,{children:a.khoa}),e.jsx(v,{children:a.status?e.jsx(Ze,{color:"green"}):e.jsx(qe,{color:"red"})}),e.jsxs(v,{children:[e.jsx(E,{color:"primary",onClick:()=>G(a),children:e.jsx(Je,{})}),e.jsx(E,{color:"error",onClick:()=>{V(a.id),b(!0)},children:e.jsx(aa,{})})]})]},a.id))})]})}),e.jsx(X,{display:"flex",justifyContent:"center",mt:2,children:e.jsx(ye,{count:1})}),e.jsxs(Q,{open:f,onClose:()=>C(!1),children:[e.jsx(ee,{children:"Thêm giảng viên"}),e.jsxs(Z,{children:[e.jsx(k,{fullWidth:!0,margin:"dense",label:"Tên",value:x.name,onChange:a=>m({...x,name:a.target.value})}),e.jsx(k,{fullWidth:!0,margin:"dense",label:"Mã GV",value:x.mgv,onChange:a=>m({...x,mgv:a.target.value})}),e.jsx(k,{fullWidth:!0,margin:"dense",label:"Khoa",value:x.khoa,onChange:a=>m({...x,khoa:a.target.value})}),e.jsx(se,{control:e.jsx(oe,{checked:x.status,onChange:a=>m({...x,status:a.target.checked})}),label:"Hoạt động"})]}),e.jsxs(q,{children:[e.jsx(T,{onClick:()=>C(!1),children:"Hủy"}),e.jsx(T,{variant:"contained",color:"primary",onClick:O,children:"Lưu"})]})]}),e.jsxs(Q,{open:H,onClose:()=>y(!1),children:[e.jsx(ee,{children:"Chỉnh sửa"}),e.jsxs(Z,{children:[e.jsx(k,{fullWidth:!0,margin:"dense",label:"Tên",value:p.name,onChange:a=>D({...p,name:a.target.value})}),e.jsx(k,{fullWidth:!0,margin:"dense",label:"Mã GV",value:p.mgv,onChange:a=>D({...p,mgv:a.target.value})}),e.jsx(k,{fullWidth:!0,margin:"dense",label:"Khoa",value:p.khoa,onChange:a=>D({...p,khoa:a.target.value})}),e.jsx(se,{control:e.jsx(oe,{checked:p.status,onChange:a=>D({...p,status:a.target.checked})}),label:"Hoạt động"})]}),e.jsxs(q,{children:[e.jsx(T,{onClick:()=>y(!1),children:"Hủy"}),e.jsx(T,{variant:"contained",color:"primary",onClick:K,children:"Cập nhật"})]})]}),e.jsxs(Q,{open:B,onClose:()=>b(!1),children:[e.jsx(ee,{children:"Xác nhận xóa"}),e.jsx(Z,{children:e.jsx(ne,{children:"Bạn chắc chắn muốn xóa giảng viên này?"})}),e.jsxs(q,{children:[e.jsx(T,{onClick:()=>b(!1),children:"Hủy"}),e.jsx(T,{color:"error",onClick:R,children:"Xóa"})]})]})]})})};export{na as default};
