import{A as l,r,j as t,Y as z,C as i,Z as o,P as A,z as s,E as Q,$ as u,a0 as b,W as q,a1 as B}from"./index-16114832.js";var F=l("calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]),V=l("file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]),U=l("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),$=l("users","IconUsers",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]);const G="/Modernize-Vite/assets/uni-f007550e.jpg",J=()=>{const f=new Date,k={weekday:"long",year:"numeric",month:"long",day:"numeric"},S=f.toLocaleDateString("vi-VN",k),[Y,p]=r.useState(null),[K,m]=r.useState(!1),[O,w]=r.useState(null),[c,M]=r.useState([]),[d,W]=r.useState(1),[h]=r.useState(10),[D,C]=r.useState(0),[N,x]=r.useState(!1),[R,j]=r.useState([]),[P,v]=r.useState("");r.useEffect(()=>{L()},[]),r.useEffect(()=>{if(c.length>0){const e=I(),n=y(e);p(n)}},[d,c]);const I=()=>{const e=(d-1)*h,n=e+h;return c.slice(e,n)},L=async()=>{m(!0);try{const e=await fetch("http://192.168.70.101:8080/history");if(!e.ok)throw new Error("Failed to fetch exam history");const n=await e.json();M(n),C(Math.ceil(n.length/h));const g=n.slice(0,h),a=y(g);p(a)}catch(e){console.error("Error fetching exam history:",e),w(e.message||"Đã xảy ra lỗi khi tải dữ liệu")}finally{m(!1)}},y=e=>{const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),g=URL.createObjectURL(n);return{totalRecords:c.length,displayedRecords:e.length,successCount:e.length,errorCount:0,processedData:{headers:["Môn học","Phòng thi","Ngày thi","Ca thi"],rows:e.map(a=>[a.subject?a.subject:"N/A",a.rooms&&a.rooms.length>0?t.jsxs("button",{className:"room-list-button",onClick:()=>{j(a.rooms),v(a.subject),x(!0)},children:["Xem danh sách phòng (",a.rooms.length," phòng)"]}):"N/A",E(a.examDate),a.shift||"N/A"])},logs:[{message:`Hiển thị ${e.length} lịch thi (trang ${d}/${D})`,timestamp:new Date().toLocaleString("vi-VN"),type:"info"}],downloadUrl:g,rawData:e,onRoomListClick:(a,T)=>{j(a),v(T),x(!0)}}},E=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("vi-VN",{weekday:"long",day:"numeric",month:"numeric",year:"numeric"})}catch{return e}},H=[{title:"Quản lý lịch thi",icon:t.jsx(F,{size:32}),description:"Xem và quản lý lịch thi",color:"#3f51b5",path:"/excel"},{title:"Quản lý coi thi",icon:t.jsx(V,{size:32}),description:"Quản lý danh sách môn thi",color:"#f50057",path:"/excel2"},{title:"Quản lý giảng viên",icon:t.jsx($,{size:32}),description:"Quản lý tài khoản người dùng",color:"#4caf50",path:"/teacher"},{title:"Lịch thi",icon:t.jsx(U,{size:32}),description:"Cấu hình hệ thống",color:"#ff9800",path:"/teacher/settings"}];return t.jsxs(z,{title:"Dashboard",description:"Trang chủ hệ thống quản lý lịch thi",children:[t.jsx(i,{children:t.jsxs(o,{container:!0,spacing:3,children:[t.jsx(o,{item:!0,xs:12,children:t.jsxs(A,{elevation:3,sx:{p:4,borderRadius:2,background:"linear-gradient(45deg, #3f51b5 30%, #7986cb 90%)",color:"white"},children:[t.jsx(s,{variant:"h4",gutterBottom:!0,children:"Chào mừng đến với Hệ thống Quản lý Lịch thi"}),t.jsx(s,{variant:"subtitle1",children:S})]})}),t.jsxs(o,{item:!0,xs:12,children:[t.jsx(s,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:"Thao tác nhanh"}),t.jsx(o,{container:!0,spacing:3,children:H.map((e,n)=>t.jsx(o,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Q,{to:e.path,style:{textDecoration:"none",display:"block",height:"100%"},children:t.jsx(u,{sx:{height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:6,backgroundColor:e.color+"10"}},children:t.jsxs(b,{sx:{textAlign:"center",p:3},children:[t.jsx(i,{sx:{color:e.color,mb:2},children:e.icon}),t.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"text.primary"},children:e.title}),t.jsx(s,{variant:"body2",color:"text.secondary",children:e.description})]})})})},n))})]}),t.jsx(o,{item:!0,xs:12,md:6,children:t.jsx(u,{sx:{height:"100%",boxShadow:3,borderRadius:2},children:t.jsxs(b,{children:[t.jsx(s,{variant:"h5",gutterBottom:!0,children:"Giới thiệu"}),t.jsx(s,{variant:"body1",paragraph:!0,children:"Hệ thống Quản lý Lịch thi là giải pháp toàn diện giúp quản lý và sắp xếp lịch thi một cách hiệu quả. Với các tính năng:"}),t.jsxs(i,{component:"ul",sx:{pl:2},children:[t.jsx(s,{component:"li",variant:"body1",paragraph:!0,children:"Quản lý lịch thi tự động và thông minh"}),t.jsx(s,{component:"li",variant:"body1",paragraph:!0,children:"Phân bổ phòng thi tối ưu"}),t.jsx(s,{component:"li",variant:"body1",paragraph:!0,children:"Theo dõi và báo cáo trực quan"}),t.jsx(s,{component:"li",variant:"body1",children:"Tích hợp với hệ thống quản lý sinh viên"})]})]})})}),t.jsx(o,{item:!0,xs:12,md:6,children:t.jsx(u,{sx:{height:"100%",boxShadow:3,borderRadius:2,overflow:"hidden"},children:t.jsx(i,{component:"img",src:G,alt:"Trường Đại học Kiến trúc Hà Nội",sx:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s","&:hover":{transform:"scale(1.02)"}}})})}),t.jsx(o,{item:!0,xs:12,children:t.jsx(i,{component:"footer",sx:{py:4,mt:4,textAlign:"center",backgroundColor:e=>e.palette.background.paper,boxShadow:3,borderRadius:2},children:t.jsxs(q,{maxWidth:"lg",children:[t.jsx(s,{variant:"h6",gutterBottom:!0,children:"Trường Đại học Kiến trúc Hà Nội"}),t.jsx(s,{variant:"body1",color:"text.secondary",children:"P. Văn Quán, Hà Đông, Hà Nội"}),t.jsx(s,{variant:"body1",color:"text.secondary",children:"Điện thoại: 024 3854 1616 | Email: info@hau.edu.vn"}),t.jsx(B,{sx:{my:2}}),t.jsxs(s,{variant:"body2",color:"text.secondary",children:["© ",new Date().getFullYear()," Hệ thống quản lý lịch thi. All rights reserved."]})]})})})]})}),N&&t.jsx("div",{className:"modal-overlay",children:t.jsxs("div",{className:"modal-content",children:[t.jsxs("div",{className:"modal-header",children:[t.jsxs("h2",{children:["Danh sách phòng thi - ",P]}),t.jsx("button",{className:"close-button",onClick:()=>x(!1),children:"×"})]}),t.jsx("div",{className:"modal-body",children:t.jsxs("table",{className:"room-list-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Mã phòng"}),t.jsx("th",{children:"Sức chứa"}),t.jsx("th",{children:"Ghi chú"})]})}),t.jsx("tbody",{children:R.map((e,n)=>t.jsxs("tr",{children:[t.jsx("td",{children:e.name}),t.jsx("td",{children:e.capacity}),t.jsx("td",{children:e.note||"-"})]},n))})]})})]})})]})};export{J as default};
